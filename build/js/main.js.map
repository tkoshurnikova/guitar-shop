{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./source/js/components/abstract-component.js","webpack:///./source/js/components/add-to-cart-popup.js","webpack:///./source/js/components/add-to-cart-success-popup.js","webpack:///./source/js/components/card.js","webpack:///./source/js/components/cards-list.js","webpack:///./source/js/components/cart-item.js","webpack:///./source/js/components/cart-sum.js","webpack:///./source/js/components/cart.js","webpack:///./source/js/components/catalog-content.js","webpack:///./source/js/components/checkbox-fieldsets.js","webpack:///./source/js/components/delete-from-cart-popup.js","webpack:///./source/js/components/filter.js","webpack:///./source/js/components/no-cards.js","webpack:///./source/js/components/pagination.js","webpack:///./source/js/components/promo.js","webpack:///./source/js/components/sort.js","webpack:///./source/js/const.js","webpack:///./source/js/controllers/card.js","webpack:///./source/js/controllers/cards.js","webpack:///./source/js/controllers/cart-item.js","webpack:///./source/js/controllers/cart.js","webpack:///./source/js/controllers/filter.js","webpack:///./source/js/guitars.js","webpack:///./source/js/main.js","webpack:///./source/js/models/cards.js","webpack:///./source/js/utils/debounce.js","webpack:///./source/js/utils/filter.js","webpack:///./source/js/utils/format.js","webpack:///./source/js/utils/local-storage.js","webpack:///./source/js/utils/popup.js","webpack:///./source/js/utils/render.js"],"names":["AbstractComponent","Error","_element","createElement","getTemplate","createAddToCartPopup","item","title","article","strings","price","type","getImage","formatPrice","AddToCartPopup","card","_card","handler","getElement","querySelector","addEventListener","createAddToCartSuccessPopup","AddToCartSuccessPopup","createCardTemplate","popularity","Card","createCardsListTemplate","CardsList","createCartItemTemplate","CartItem","element","quantityElement","totalSumElement","evt","counter","Number","value","target","dataset","name","id","_deleteButtonClickHandler","innerHTML","sum","count","Math","ceil","createCartSumComponent","cartSum","CartSumComponent","_cartSum","createCart","Cart","createCatalogContentTemplate","CatalogContent","createCheckboxMarkup","label","isChecked","isDisabled","createCheckboxFieldset","filter","checkboxMarkup","checkboxes","map","join","createFilterTemplate","filtersByType","filtersByStrings","CheckboxFiedlsets","_filtersByType","_filtersByStrings","_subscribeOnEvents","setFilter","getCards","debounce","checkedCheckboxesElements","Array","from","querySelectorAll","checkboxNames","tagName","forEach","checkbox","checked","createDeleteFromCartPopup","DeleteFromCartPopup","cards","prices","min","max","Filter","_cards","minPriceElement","minPriceValue","replace","maxPriceElement","maxPriceValue","key","serviceKeys","indexOf","returnValue","preventDefault","Intl","NumberFormat","format","createNoCardsComponent","NoCards","createPageElement","page","activePage","createPaginationTemplate","pagesNumber","pages","createArray","length","push","concat","slice","pagesTemplate","pageNumber","Pagination","_pagesNumber","_activePage","createPromoForm","PromoForm","_promoCode","_promoCodeUsage","isValidPromoCode","classList","add","remove","promoCodes","Object","values","PromoCodes","index","createSortTemplate","featureSortType","directionSortType","SortType","PRICE","POPULARITY","ASCENDING","DESCENDING","Sort","currentSortFeatureType","currentSortDirectionType","_currentSortFeatureType","_currentSortDirectionType","sortType","parentElement","contains","CARDS_PER_PAGE","FILTERS_BY_TYPE","FILTERS_BY_STRINGS","guitarTypeToImage","DEFAULT","GITARAHIT","SUPERGITARA","GITARA2020","CardControlled","container","addToCart","_container","_addToCart","_cardComponent","_addToCartPopup","_addToCartSuccessPopup","CardComponent","render","RenderPosition","BEFOREEND","setCardListeners","setBuyButtonClickHandler","bodyElement","document","popup","setPopupListeners","openPopup","addToCartButtonElement","closePopup","overlayElement","setToCartButtonClickHandler","continueShoppingButtonElement","CardsController","cardsModel","_cardsModel","_cardsListComponent","CardsListComponent","_noCardsComponent","NoCardsComponent","_filterController","_paginationComponent","_onFilterChange","bind","_onSortFeatureTypeChange","_onSortDirectionTypeChange","_resetFilters","setFilterChangeHandler","_cardControllers","_renderSortComponents","_renderCards","_renderPagination","_setCartItemCount","_renderFilterContoller","catalogListElement","renderCardControllers","cardControllers","cardController","CardController","catalogSectionElement","FilterController","PaginationComponent","_sortComponent","SortComponent","AFTERBEGIN","setSortFeatureTypeChangeHandler","setSortDirectionTypeChangeHandler","_removeCards","_removePagination","setToResetFiltersButtonClickHandler","checkboxFilters","minPrice","maxPrice","_update","sortedCards","sort","a","b","localStorage","getItem","cartItemsElement","cartItemsCounter","JSON","parse","saveDataToLocalStorage","CartItemController","removeFromCart","changeItemQuantity","_removeFromCart","_changeItemQuantity","_cartItemComponent","CartItemComponent","setCartItemListeners","setQuantityChangeHandler","setDeleteButtonClickHandler","_deleteFromCartPopup","cancelButtonElement","CartController","_cartComponent","CartComponent","_cartItemControllers","_promoForm","_cartSumComponent","_checkPromoCode","_renderCartItems","_renderPromoForm","_getCartSum","_renderCartSum","cartListElement","renderCartItemControllers","cartItemControllers","cartItemController","containerElement","setSubmitHandler","itemSumBlocksElements","itemSums","itemSumBlock","reduce","code","discount","_removeCartItems","deleteDataFromLocalStorage","_filterComponent","_checkboxFieldsetsComponent","_onPriceChange","_onCheckboxChange","_checkedCheckboxes","_minPrice","_maxPrice","FilterComponent","_renderCheckboxFieldsets","oldComponent","guitarTypeCheckboxes","guitarTypeCheckedCheckboxes","includes","arrayLength","getSameStringsType","getCardsByGuitarTypeFilter","CheckboxFieldsets","GUITARS","CardsModel","setCards","cartSectionElement","CatalogContentComponent","catalogContentSection","cardsController","cartController","Cards","_filterChangeHandlers","_checkboxNames","getCardsByFilter","getSameGuitarType","_callHandlers","handlers","DEBOUNCE_INTERVAL","cb","lastTimeout","args","window","clearTimeout","setTimeout","getSamePrice","getSameFilters","stringsNumberCheckboxes","stringsNumberCheckedCheckboxes","toString","maxValue","array","i","data","findIndex","setItem","stringify","popupElement","closePopupButtonElement","onOpenButtonClick","onEscPress","onCloseButtonClick","removeEventListener","keyCode","template","newElement","firstChild","component","place","prepend","append","newComponent","oldElement","isExistElements","replaceChild","removeElement"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./source/js/main.js\");\n","import {createElement} from '../utils/render.js';\n\nexport default class AbstractComponent {\n  constructor() {\n    if (new.target === AbstractComponent) {\n      throw new Error(`Can't instantiate AbstractComponent, only concrete one.`);\n    }\n\n    this._element = null;\n  }\n\n  getTemplate() {\n    throw new Error(`Abstract method not implemented: getTemplate`);\n  }\n\n  getElement() {\n    if (!this._element) {\n      this._element = createElement(this.getTemplate());\n    }\n\n    return this._element;\n  }\n\n  removeElement() {\n    this._element = null;\n  }\n}\n","import AbstractComponent from './abstract-component.js';\nimport {formatPrice, getImage} from '../utils/format.js';\n\nconst createAddToCartPopup = ({item, title, article, strings, price, type}) => {\n  return (\n    `<div class=\"popup\" id=\"add-to-cart\">\n      <button class=\"popup__close-button\" type=\"button\">\n        <span class=\"visually-hidden\">Закрыть окно</span>\n        <svg width=\"11.66\" height=\"11.66\"><use xlink:href=\"#icon-cross\"></use></svg>\n      </button>\n      <h2>Добавить товар в корзину</h2>\n      <div class=\"popup__content-info\">\n        <img src=\"${getImage(item, type)}\" width=\"52\" height=\"130\" alt=\"Фото гитары\">\n        <div class=\"popup__item-info\">\n          <h3>Гитара ${title}</h3>\n          <p>Артикул: ${article}</p>\n          <p>Электрогитара, ${strings} струнная </p>\n          <p class=\"popup__price\">Цена: ${formatPrice(price)} ₽</p>\n        </div>\n        <button\n          class=\"button button--to-cart\"\n          type=\"button\"\n        >\n          Добавить в корзину\n        </button>\n      </div>\n    </div>\n    `\n  );\n};\n\nexport default class AddToCartPopup extends AbstractComponent {\n  constructor(card) {\n    super();\n    this._card = card;\n  }\n\n  getTemplate() {\n    return createAddToCartPopup(this._card);\n  }\n\n  setToCartButtonClickHandler(handler) {\n    this.getElement()\n        .querySelector(`.button--to-cart`)\n        .addEventListener(`click`, handler);\n  }\n}\n","import AbstractComponent from './abstract-component.js';\n\nconst createAddToCartSuccessPopup = () => {\n  return (\n    `<div class=\"popup\" id=\"add-to-cart-success\">\n      <button class=\"popup__close-button\" type=\"button\">\n        <span class=\"visually-hidden\">Закрыть окно</span>\n        <svg width=\"11.66\" height=\"11.66\"><use xlink:href=\"#icon-cross\"></use></svg>\n      </button>\n      <h2>Товар успешно добавлен в корзину</h2>\n      <p class=\"popup__buttons\">\n        <a class=\"button button--to-cart\" href=\"cart.html\">Перейти в корзину</a>\n        <button\n          class=\"button button--shopping\"\n          type=\"button\"\n        >\n          Продолжить покупки\n        </button>\n      </p>\n    </div>`\n  );\n};\n\nexport default class AddToCartSuccessPopup extends AbstractComponent {\n  getTemplate() {\n    return createAddToCartSuccessPopup();\n  }\n}\n","import AbstractComponent from './abstract-component.js';\nimport {formatPrice, getImage} from '../utils/format.js';\n\nexport const createCardTemplate = ({item, title, type, popularity, price}) => {\n  return (\n    `<li>\n      <img\n        width=\"68\"\n        height=\"190\"\n        src=\"${getImage(item, type)}\"\n        alt=\"Фото гитары\"\n      >\n      <p>\n        <span class=\"catalog__rating-overlay\">\n          <span class=\"catalog__stars\">\n            <svg width=\"9.93\" height=\"9.48\">\n              <use xlink:href=\"#icon-star\"></use>\n            </svg>\n            <svg width=\"9.93\" height=\"9.48\">\n              <use xlink:href=\"#icon-star\"></use>\n            </svg>\n            <svg width=\"9.93\" height=\"9.48\">\n              <use xlink:href=\"#icon-star\"></use>\n            </svg>\n            <svg width=\"9.93\" height=\"9.48\">\n              <use xlink:href=\"#icon-star\"></use>\n            </svg>\n            <svg width=\"9.93\" height=\"9.48\">\n              <use xlink:href=\"#icon-star\"></use>\n            </svg>\n          </span>\n          <span class=\"catalog__stars catalog__stars--full\">\n            <svg width=\"9.93\" height=\"9.48\">\n              <use xlink:href=\"#icon-star-full\"></use>\n            </svg>\n            <svg width=\"9.93\" height=\"9.48\">\n              <use xlink:href=\"#icon-star-full\"></use>\n            </svg>\n            <svg width=\"9.93\" height=\"9.48\">\n              <use xlink:href=\"#icon-star-full\"></use>\n            </svg>\n            <svg width=\"9.93\" height=\"9.48\">\n              <use xlink:href=\"#icon-star-full\"></use>\n            </svg>\n            <svg width=\"9.93\" height=\"9.48\">\n              <use xlink:href=\"#icon-star-full\"></use>\n            </svg>\n          </span>\n        </span>\n        <span>${popularity}</span>\n      </p>\n      <p>\n        <span>${title}</span>\n        <span>${formatPrice(price)} ₽</span>\n      </p>\n      <p>\n        <a class=\"button\" href=\"#\">Подробнее</a>\n        <button class=\"button button--buy\" type=\"button\">\n          <svg width=\"10.36\" height=\"10.5\">\n            <use xlink:href=\"#icon-buy\"></use>\n          </svg>\n          Купить\n        </button>\n      </p>\n    </li>`\n  );\n};\n\nexport default class Card extends AbstractComponent {\n  constructor(card) {\n    super();\n    this._card = card;\n  }\n\n  getTemplate() {\n    return createCardTemplate(this._card);\n  }\n\n  setBuyButtonClickHandler(handler) {\n    this.getElement()\n        .querySelector(`.button--buy`)\n        .addEventListener(`click`, handler);\n  }\n}\n","import AbstractComponent from './abstract-component.js';\n\nconst createCardsListTemplate = () => {\n  return (\n    `<ul class=\"catalog__list\">\n    </ul>`\n  );\n};\n\nexport default class CardsList extends AbstractComponent {\n  getTemplate() {\n    return createCardsListTemplate();\n  }\n}\n","import AbstractComponent from './abstract-component.js';\nimport {formatPrice, getImage} from '../utils/format.js';\n\nexport const createCartItemTemplate = (card) => {\n  const {item, article, title, type, strings, price} = card;\n\n  return (\n    `<li>\n      <button class=\"cart__close-button\" type=\"button\">\n        <span class=\"visually-hidden\">Удалить из корзины</span>\n        <svg width=\"11.66\" height=\"11.66\"><use xlink:href=\"#icon-cross\"></use></svg>\n      </button>\n      <img src=\"${getImage(item, type)}\" width=\"52\" height=\"130\" alt=\"Фото гитары\">\n      <div class=\"cart__item-info\">\n        <h3>Электрогитара ${title}</h3>\n        <p>Артикул: ${article}</p>\n        <p>Электрогитара, ${strings} струнная </p>\n      </div>\n      <p class=\"cart__price\">${formatPrice(price)} ₽</p>\n      <div class=\"cart__quantity\">\n        <button type=\"button\" id=\"decrease-quantity\" data-name=\"quantity\">-</button>\n        <input type=\"number\" name=\"quantity\" id=\"quantity\" value=\"1\">\n        <label class=\"visually-hidden\" for=\"quantity\">Количество</label>\n        <button type=\"button\" id=\"increase-quantity\" data-name=\"quantity\">+</button>\n      </div>\n      <p\n        class=\"cart__price cart__price--full\"\n        data-sum=\"${price}\"\n      >\n        ${formatPrice(price)} ₽\n      </p>\n    </li>`\n  );\n};\n\nexport default class CartItem extends AbstractComponent {\n  constructor(card) {\n    super();\n    this._card = card;\n  }\n\n  getTemplate() {\n    return createCartItemTemplate(this._card);\n  }\n\n  setDeleteButtonClickHandler(handler) {\n    this.getElement()\n        .querySelector(`.cart__close-button`)\n        .addEventListener(`click`, handler);\n  }\n\n  setQuantityChangeHandler(handler) {\n    const element = this.getElement();\n    const quantityElement = element.querySelector(`#quantity`);\n    const totalSumElement = element.querySelector(`.cart__price--full`);\n\n    element.querySelector(`.cart__quantity`).addEventListener(`click`, (evt) => {\n\n      let counter = Number(quantityElement.value);\n\n      if (evt.target.dataset.name !== `quantity`) {\n        return;\n      }\n\n      if (evt.target.id === `decrease-quantity`) {\n        counter -= 1;\n      }\n\n      if (evt.target.id === `increase-quantity`) {\n        counter += 1;\n      }\n\n      if (!counter) {\n        this._deleteButtonClickHandler();\n      }\n\n      counter = counter < 1 ? 1 : counter;\n      counter = counter > 99 ? 99 : counter;\n\n      totalSumElement.innerHTML = formatPrice(this._card.price * counter) + ` ₽`;\n      quantityElement.value = counter;\n      totalSumElement.dataset.sum = this._card.price * counter;\n      handler();\n    });\n\n    quantityElement.addEventListener(`change`, () => {\n      let count = Number(quantityElement.value);\n\n      if (!count) {\n        this._deleteButtonClickHandler();\n      }\n\n      count = count < 1 ? 1 : count;\n      count = count > 99 ? 99 : count;\n      count = Math.ceil(count);\n\n      totalSumElement.innerHTML = formatPrice(this._card.price * count) + ` ₽`;\n      quantityElement.value = count;\n      totalSumElement.dataset.sum = this._card.price * count;\n      handler();\n    });\n  }\n}\n","import AbstractComponent from './abstract-component.js';\nimport {formatPrice} from '../utils/format.js';\n\nconst createCartSumComponent = (cartSum) => {\n  return (\n    `<div class=\"promo__result\">\n      <p>Всего: ${formatPrice(cartSum)} ₽</p>\n      <a\n        class=\"button button--order\"\n        href=\"#\"\n      >\n        Оформить заказ\n      </a>\n    </div>`\n  );\n};\n\nexport default class CartSumComponent extends AbstractComponent {\n  constructor(cartSum) {\n    super();\n    this._cartSum = cartSum;\n  }\n\n  getTemplate() {\n    return createCartSumComponent(this._cartSum);\n  }\n}\n","import AbstractComponent from './abstract-component.js';\n\nconst createCart = () => {\n  return (\n    `<section class=\"cart\">\n      <h2 class=\"visually-hidden\">Список товаров</h2>\n      <ul>\n      </ul>\n      <section class=\"promo\">\n      </section>\n    </section>`\n  );\n};\n\nexport default class Cart extends AbstractComponent {\n  getTemplate() {\n    return createCart();\n  }\n}\n","import AbstractComponent from './abstract-component.js';\n\nconst createCatalogContentTemplate = () => {\n  return (\n    `<div class=\"catalog__content\">\n      <h2 class=\"visually-hidden\">Товары</h2>\n    </div>`\n  );\n};\n\nexport default class CatalogContent extends AbstractComponent {\n  getTemplate() {\n    return createCatalogContentTemplate();\n  }\n}\n","import AbstractComponent from './abstract-component.js';\nimport {debounce} from '../utils/debounce.js';\n\nconst createCheckboxMarkup = (type, item) => {\n  return (\n    `<input\n      class=\"visually-hidden\"\n      type=\"checkbox\"\n      name=\"${type}\"\n      id=\"${item.type}\"\n      aria-label=\"${item.label}\"\n      ${item.isChecked ? `checked` : ``}\n      ${item.isDisabled ? `disabled` : ``}\n      data-label=\"${item.item}\"\n    >\n    <label\n      for=\"${item.type}\"\n    >\n    ${item.label}\n    </label>`\n  );\n};\n\nconst createCheckboxFieldset = (filter) => {\n  const checkboxMarkup = filter.checkboxes.map((item) =>\n    createCheckboxMarkup(filter.type, item))\n      .join(`\\n`);\n\n  return (\n    `<fieldset class=\"form__checkbox-fieldset ${filter.type}\">\n      <legend>${filter.title}</legend>\n      ${checkboxMarkup}\n    </fieldset>`\n  );\n};\n\nconst createFilterTemplate = (filtersByType, filtersByStrings) => {\n  return (\n    `<div>\n      ${createCheckboxFieldset(filtersByType)}\n      ${createCheckboxFieldset(filtersByStrings)}\n    </div>`\n  );\n};\n\nexport default class CheckboxFiedlsets extends AbstractComponent {\n  constructor(filtersByType, filtersByStrings) {\n    super();\n    this._filtersByType = filtersByType;\n    this._filtersByStrings = filtersByStrings;\n    this._subscribeOnEvents();\n  }\n\n  getTemplate() {\n    return createFilterTemplate(\n        this._filtersByType,\n        this._filtersByStrings\n    );\n  }\n\n  setFilterChangeHandler(setFilter, getCards) {\n    const element = this.getElement();\n\n    element.addEventListener(`change`, debounce(() => {\n      const checkedCheckboxesElements = Array.from(\n          element.querySelectorAll(`input:checked`)\n      );\n      const checkboxNames = checkedCheckboxesElements.map((item) => item.dataset.label);\n\n      setFilter(checkboxNames);\n      getCards();\n    }));\n  }\n\n  _subscribeOnEvents() {\n    const element = this.getElement();\n    const filtersByType = this._filtersByType;\n    const filtersByStrings = this._filtersByStrings;\n\n    element.querySelector(`.guitar-type`).addEventListener(`change`, (evt) => {\n      if (evt.target.tagName !== `INPUT`) {\n        return;\n      }\n      filtersByType.checkboxes.forEach((checkbox) => {\n        if (checkbox.item === evt.target.dataset.label) {\n          checkbox.isChecked = evt.target.checked;\n        }\n      });\n    });\n\n    element.querySelector(`.strings-number`).addEventListener(`change`, (evt) => {\n      if (evt.target.tagName !== `INPUT`) {\n        return;\n      }\n      filtersByStrings.checkboxes.forEach((checkbox) => {\n        if (checkbox.item === evt.target.dataset.label) {\n          checkbox.isChecked = evt.target.checked;\n        }\n      });\n    });\n  }\n}\n","import AbstractComponent from './abstract-component.js';\nimport {formatPrice, getImage} from '../utils/format.js';\n\nconst createDeleteFromCartPopup = (card) => {\n  const {item, title, article, strings, price, type} = card;\n  return (\n    `<div class=\"popup\">\n      <button class=\"popup__close-button\" type=\"button\">\n        <span class=\"visually-hidden\">Закрыть окно</span>\n        <svg width=\"11.66\" height=\"11.66\">\n          <use xlink:href=\"#icon-cross\"></use>\n        </svg>\n      </button>\n      <h2>Удалить этот товар?</h2>\n      <div class=\"popup__content-info\">\n        <img\n          src=\"${getImage(item, type)}\"\n          width=\"52\"\n          height=\"130\"\n          alt=\"Фото гитары\"\n        >\n        <div class=\"popup__item-info\">\n          <h3>Гитара ${title}</h3>\n          <p>Артикул: ${article}</p>\n          <p>Электрогитара, ${strings} струнная </p>\n          <p class=\"popup__price\">Цена: ${formatPrice(price)} ₽</p>\n        </div>\n        <p class=\"popup__buttons popup__buttons--vertical\">\n          <button\n            class=\"button button--delete\"\n            type=\"button\"\n          >\n            Удалить товар\n          </button>\n          <button\n            class=\"button button--shopping\"\n            type=\"button\"\n          >\n            Продолжить покупки\n          </button>\n        </p>\n      </div>\n    </div>`\n  );\n};\n\nexport default class DeleteFromCartPopup extends AbstractComponent {\n  constructor(card) {\n    super();\n    this._card = card;\n  }\n\n  getTemplate() {\n    return createDeleteFromCartPopup(this._card);\n  }\n\n  setDeleteButtonClickHandler(handler) {\n    this.getElement()\n        .querySelector(`.button--delete`)\n        .addEventListener(`click`, handler);\n  }\n}\n","import AbstractComponent from './abstract-component.js';\nimport {debounce} from '../utils/debounce.js';\nimport {formatPrice} from '../utils/format.js';\n\nconst createFilterTemplate = (cards) => {\n  const prices = cards.map((card) => Number(card.price));\n\n  return (\n    `<form class=\"form\" method=\"post\">\n      <h2>Фильтр</h2>\n      <fieldset class=\"form__price-fieldset\">\n        <legend>Цена, <span>₽</span></legend>\n        <p>\n          <input\n            type=\"text\"\n            name=\"price\"\n            id=\"min-price\"\n            placeholder=\"${formatPrice(Math.min(...prices))}\"\n          >\n          <label class=\"visually-hidden\" for=\"min-price\">\n            Цена от\n          </label>\n          <input\n            type=\"text\"\n            name=\"price\"\n            id=\"max-price\"\n            placeholder=\"${formatPrice(Math.max(...prices))}\"\n          >\n          <label class=\"visually-hidden\" for=\"max-price\">\n            Цена до\n          </label>\n        </p>\n      </fieldset>\n    </form>`\n  );\n};\n\nexport default class Filter extends AbstractComponent {\n  constructor(cards) {\n    super();\n    this._cards = cards;\n    this._subscribeOnEvents();\n  }\n\n  getTemplate() {\n    return createFilterTemplate(this._cards);\n  }\n\n  setFilterChangeHandler(setFilter, getCards) {\n    const element = this.getElement();\n\n    element.addEventListener(`change`, debounce(() => {\n      const minPriceElement = element.querySelector(`#min-price`);\n      const minPriceValue = Number(minPriceElement.value.replace(/\\s/g, ``));\n\n      const maxPriceElement = element.querySelector(`#max-price`);\n      const maxPriceValue = Number(maxPriceElement.value.replace(/\\s/g, ``));\n\n      setFilter(minPriceValue, maxPriceValue);\n      getCards();\n    }));\n  }\n\n  _subscribeOnEvents() {\n    const element = this.getElement();\n    const prices = this._cards.map((card) => Number(card.price));\n\n    element.querySelector(`.form__price-fieldset`).addEventListener(`keydown`, (evt) => {\n      const key = evt.key;\n      const serviceKeys = [`Backspace`, `Delete`, `ArrowLeft`, `ArrowRight`];\n\n      if (key >= 0 || key <= 9 || serviceKeys.indexOf(key) > -1) {\n        return true;\n      } else {\n        evt.returnValue = false;\n        if (evt.preventDefault) {\n          evt.preventDefault();\n        }\n      }\n      return true;\n    });\n\n    element.querySelector(`.form__price-fieldset`).addEventListener(`input`, () => {\n      const minPriceElement = element.querySelector(`#min-price`);\n      const maxPriceElement = element.querySelector(`#max-price`);\n\n      let minPriceValue = Number(minPriceElement.value.replace(/\\s/g, ``));\n      let maxPriceValue = Number(maxPriceElement.value.replace(/\\s/g, ``));\n\n      if (minPriceValue) {\n        minPriceElement.value = new Intl.NumberFormat(`ru-RU`).format(minPriceValue);\n      }\n\n      if (maxPriceValue) {\n        maxPriceElement.value = new Intl.NumberFormat(`ru-RU`).format(maxPriceValue);\n      }\n    });\n\n    element.querySelector(`.form__price-fieldset`).addEventListener(`change`, () => {\n      const minPriceElement = element.querySelector(`#min-price`);\n      const maxPriceElement = element.querySelector(`#max-price`);\n\n      let minPriceValue = Number(minPriceElement.value.replace(/\\s/g, ``));\n      let maxPriceValue = Number(maxPriceElement.value.replace(/\\s/g, ``));\n\n      if (maxPriceValue && minPriceValue && maxPriceValue < minPriceValue) {\n\n        const min = maxPriceValue < Math.min(...prices) ? Math.min(...prices) : maxPriceValue;\n        minPriceValue = min;\n        maxPriceValue = min;\n      }\n\n      if (minPriceValue && minPriceValue < Math.min(...prices)) {\n        minPriceValue = Math.min(...prices);\n      }\n\n      if (maxPriceValue && maxPriceValue > Math.max(...prices)) {\n        maxPriceValue = Math.max(...prices);\n      }\n\n      if (minPriceValue) {\n        minPriceElement.value = new Intl.NumberFormat(`ru-RU`).format(minPriceValue);\n      }\n\n      if (maxPriceValue) {\n        maxPriceElement.value = new Intl.NumberFormat(`ru-RU`).format(maxPriceValue);\n      }\n    });\n  }\n}\n","import AbstractComponent from './abstract-component.js';\n\nconst createNoCardsComponent = () => {\n  return (\n    `<div class=\"no-cards\">\n      К сожалению,  у нас нет товаров по заданным параметрам\n      <button class=\"button button--reset-filters\" type=\"button\">Сбросить фильтры</button>\n    </div>`\n  );\n};\n\nexport default class NoCards extends AbstractComponent {\n  getTemplate() {\n    return createNoCardsComponent();\n  }\n\n  setToResetFiltersButtonClickHandler(handler) {\n    this.getElement()\n        .querySelector(`.button--reset-filters`)\n        .addEventListener(`click`, handler);\n  }\n}\n","import AbstractComponent from './abstract-component.js';\nimport {createArray} from '../utils/format.js';\n\nconst createPageElement = (page, activePage) => {\n  return (\n    `<li class=\"pagination__item ${page === activePage ? `pagination__item--active` : ``}\">\n      ${page === `...` ? page : `<a>${page}</a>`}\n    </li>`\n  );\n};\n\nconst createPaginationTemplate = (pagesNumber, activePage) => {\n  let pages = createArray(pagesNumber);\n  if (pages.length > 2) {\n    pages.push(4, 5, 6, 7); // чтобы было как в макете\n    pages = [].concat(pages.slice(0, 2), `...`, pages[pages.length - 1]);\n  }\n  const pagesTemplate = pages.map((pageNumber) =>\n    createPageElement(pageNumber, activePage))\n      .join(`\\n`);\n\n  return (\n    `<ul class=\"pagination\">\n      ${pagesTemplate}\n      <li class=\"pagination__item pagination__next\">\n        <a href=\"#\">Далее</a>\n      </li>\n    </ul>`\n  );\n};\n\nexport default class Pagination extends AbstractComponent {\n  constructor(pagesNumber, activePage) {\n    super();\n    this._pagesNumber = pagesNumber;\n    this._activePage = activePage;\n  }\n\n  getTemplate() {\n    return createPaginationTemplate(this._pagesNumber, this._activePage);\n  }\n}\n","import AbstractComponent from './abstract-component.js';\nimport {PromoCodes} from '../const.js';\n\nconst createPromoForm = () => {\n  return (\n    `<form method=\"post\">\n      <h3>Промокод на скидку</h3>\n      <p>Введите свой промокод, если он у вас есть.</p>\n      <p class=\"promo__coupon\">\n        <input type=\"text\" name=\"promo\" id=\"promo\">\n        <label class=\"visually-hidden\" for=\"promo\">Промокод</label>\n        <button class=\"button button--promo\" type=\"submit\">Применить купон</button>\n        <p class=\"visually-hidden\" id=\"not-valid-promocode\">Промокод не действителен</p>\n      </p>\n    </form>`\n  );\n};\n\nexport default class PromoForm extends AbstractComponent {\n  constructor() {\n    super();\n    this._promoCode = null;\n    this._promoCodeUsage = 0;\n    this._subscribeOnEvents();\n  }\n\n  getTemplate() {\n    return createPromoForm();\n  }\n\n  setSubmitHandler(handler) {\n    this.getElement().addEventListener(`submit`, (evt) => {\n      evt.preventDefault();\n      if (!this._promoCodeUsage) {\n        handler(this._promoCode);\n      }\n\n      if (this.isValidPromoCode()) {\n        this._promoCodeUsage += 1;\n        this.getElement()\n            .querySelector(`#not-valid-promocode`)\n            .classList.add(`visually-hidden`);\n      } else {\n        this.getElement()\n            .querySelector(`#not-valid-promocode`)\n            .classList.remove(`visually-hidden`);\n      }\n    });\n  }\n\n  isValidPromoCode() {\n    const promoCodes = Object.values(PromoCodes);\n    const index = promoCodes.indexOf(this._promoCode);\n    return index >= 0;\n  }\n\n  _subscribeOnEvents() {\n    this.getElement()\n        .querySelector(`input`)\n        .addEventListener(`change`, () => {\n          this._promoCode = this.getElement().querySelector(`input`).value;\n        });\n  }\n}\n","import AbstractComponent from './abstract-component.js';\nimport {SortType} from '../const.js';\n\nconst createSortTemplate = (featureSortType, directionSortType) => {\n  return (\n    `<div class=\"catalog__sort-buttons\">\n      Сортировать:\n      <button\n        class=\"${featureSortType === SortType.PRICE ?\n      `catalog__sort-buttons--active` : ``}\"\n        data-sort-type=\"${SortType.PRICE}\"\n        type=\"button\"\n      >\n        по цене\n      </button>\n      <button\n        class=\"${featureSortType === SortType.POPULARITY ?\n      `catalog__sort-buttons--active` : ``}\"\n        data-sort-type=\"${SortType.POPULARITY}\"\n        type=\"button\"\n      >\n        по популярности\n      </button>\n      <div class=\"sort-arrows\">\n        <button\n          class=\"${directionSortType === SortType.ASCENDING ?\n      `sort-arrows__active-element` : ``}\"\n          data-sort-type=\"${SortType.ASCENDING}\"\n          type=\"button\"\n        >\n          <span class=\"visually-hidden\">по возрастанию</span>\n        </button>\n        <button\n          class=\"${directionSortType === SortType.DESCENDING ?\n      `sort-arrows__active-element` : ``}\"\n          data-sort-type=\"${SortType.DESCENDING}\"\n          type=\"button\"\n        >\n          <span class=\"visually-hidden\">по убыванию</span>\n        </button>\n      </div>\n    </div>`\n  );\n};\n\nexport default class Sort extends AbstractComponent {\n  constructor(currentSortFeatureType, currentSortDirectionType) {\n    super();\n    this._currentSortFeatureType = currentSortFeatureType;\n    this._currentSortDirectionType = currentSortDirectionType;\n  }\n\n  getTemplate() {\n    return createSortTemplate(\n        this._currentSortFeatureType,\n        this._currentSortDirectionType\n    );\n  }\n\n  setSortFeatureTypeChangeHandler(handler) {\n    this.getElement().addEventListener(`click`, (evt) => {\n\n      if (evt.target.tagName !== `BUTTON`) {\n        return;\n      }\n\n      const sortType = evt.target.dataset.sortType;\n      const parentElement = evt.target.parentElement;\n\n      if (this._currentSortFeatureType === sortType ||\n        !parentElement.classList.contains(`catalog__sort-buttons`)) {\n        return;\n      }\n\n      handler(sortType);\n    });\n  }\n\n  setSortDirectionTypeChangeHandler(handler) {\n    this.getElement().addEventListener(`click`, (evt) => {\n\n      if (evt.target.tagName !== `BUTTON`) {\n        return;\n      }\n\n      const sortType = evt.target.dataset.sortType;\n      const parentElement = evt.target.parentElement;\n\n      if (this._currentSortDirectionType === sortType ||\n        !parentElement.classList.contains(`sort-arrows`)) {\n        return;\n      }\n\n      handler(sortType);\n    });\n  }\n}\n","export const CARDS_PER_PAGE = 9;\n\nexport const FILTERS_BY_TYPE = {\n  'title': `Тип гитар`,\n  'type': `guitar-type`,\n  'checkboxes': [\n    {\n      'type': `acoustic`,\n      'label': `Акустические гитары`,\n      'item': `акустическая гитара`,\n      'isChecked': false,\n      'isDisabled': false\n    },\n    {\n      'type': `electro`,\n      'label': `Электрогитары`,\n      'item': `электрогитара`,\n      'isChecked': false,\n      'isDisabled': false\n    },\n    {\n      'type': `ukulele`,\n      'label': `Укулеле`,\n      'item': `укулеле`,\n      'isChecked': false,\n      'isDisabled': false\n    }\n  ]\n};\n\nexport const FILTERS_BY_STRINGS = {\n  'title': `Количество струн`,\n  'type': `strings-number`,\n  'checkboxes': [\n    {\n      'type': `4-strings`,\n      'label': `4`,\n      'item': `4`,\n      'isChecked': false,\n      'isDisabled': false\n    },\n    {\n      'type': `6-strings`,\n      'label': `6`,\n      'item': `6`,\n      'isChecked': false,\n      'isDisabled': false\n    },\n    {\n      'type': `7-strings`,\n      'label': `7`,\n      'item': `7`,\n      'isChecked': false,\n      'isDisabled': false\n    },\n    {\n      'type': `12-strings`,\n      'label': `12`,\n      'item': `12`,\n      'isChecked': false,\n      'isDisabled': false\n    }\n  ]\n};\n\nexport const guitarTypeToImage = {\n  'акустическая гитара': `img/guitars/guitar-5.png`,\n  'электрогитара': `img/guitars/guitar-1.png`,\n  'укулеле': `img/guitars/guitar-3.png`\n};\n\nexport const SortType = {\n  DEFAULT: `default`,\n  PRICE: `price`,\n  POPULARITY: `popularity`,\n  ASCENDING: `ascending`,\n  DESCENDING: `descending`\n};\n\nexport const PromoCodes = {\n  GITARAHIT: `GITARAHIT`,\n  SUPERGITARA: `SUPERGITARA`,\n  GITARA2020: `GITARA2020`\n};\n","import CardComponent from '../components/card.js';\nimport AddToCartPopup from '../components/add-to-cart-popup.js';\nimport AddToCartSuccessPopup from '../components/add-to-cart-success-popup.js';\nimport {render, RenderPosition} from '../utils/render.js';\nimport {openPopup, closePopup} from '../utils/popup.js';\n\nexport default class CardControlled {\n  constructor(container, addToCart) {\n    this._container = container;\n    this._addToCart = addToCart;\n\n    this._cardComponent = null;\n    this._addToCartPopup = null;\n    this._addToCartSuccessPopup = null;\n    this._card = null;\n  }\n\n  render(card) {\n    this._card = card;\n    this._cardComponent = new CardComponent(this._card);\n    render(this._container, this._cardComponent, RenderPosition.BEFOREEND);\n    this.setCardListeners();\n  }\n\n  setCardListeners() {\n    this._cardComponent.setBuyButtonClickHandler(() => {\n      const bodyElement = document.querySelector(`body`);\n\n      this._addToCartPopup = new AddToCartPopup(this._card);\n      const popup = this._addToCartPopup;\n\n      render(bodyElement, popup, RenderPosition.BEFOREEND);\n      this.setPopupListeners(this._card);\n      openPopup(popup);\n\n      const addToCartButtonElement = popup.getElement().querySelector(`.button--to-cart`);\n\n      addToCartButtonElement.addEventListener(`click`, () => {\n        closePopup(popup);\n\n        const overlayElement = document.querySelector(`.overlay`);\n        overlayElement.classList.remove(`overlay--hidden`);\n        bodyElement.classList.add(`no-scroll`);\n      });\n    });\n  }\n\n  setPopupListeners(card) {\n    this._addToCartPopup.setToCartButtonClickHandler(() => {\n      this._addToCart(card);\n\n      const bodyElement = document.querySelector(`body`);\n\n      this._addToCartSuccessPopup = new AddToCartSuccessPopup();\n      const popup = this._addToCartSuccessPopup;\n\n      render(bodyElement, popup, RenderPosition.BEFOREEND);\n      openPopup(popup);\n\n      const continueShoppingButtonElement = popup.getElement().querySelector(`.button--shopping`);\n      continueShoppingButtonElement.addEventListener(`click`, () => {\n        closePopup(popup);\n      });\n    });\n  }\n}\n","import CardsListComponent from '../components/cards-list.js';\nimport PaginationComponent from '../components/pagination.js';\nimport NoCardsComponent from '../components/no-cards.js';\nimport SortComponent from '../components/sort.js';\nimport CardController from './card.js';\nimport FilterController from './filter.js';\nimport {render, remove, RenderPosition} from '../utils/render.js';\nimport {CARDS_PER_PAGE, SortType} from '../const.js';\nimport {saveDataToLocalStorage} from '../utils/local-storage.js';\n\nexport default class CardsController {\n  constructor(container, cardsModel) {\n    this._container = container;\n    this._cardsModel = cardsModel;\n\n    this._currentSortFeatureType = SortType.DEFAULT;\n    this._currentSortDirectionType = SortType.DEFAULT;\n\n    this._cardsListComponent = new CardsListComponent();\n    this._noCardsComponent = new NoCardsComponent();\n    this._filterController = null;\n\n    this._paginationComponent = null;\n    this._activePage = 1;\n\n    this._onFilterChange = this._onFilterChange.bind(this);\n    this._onSortFeatureTypeChange = this._onSortFeatureTypeChange.bind(this);\n    this._onSortDirectionTypeChange = this._onSortDirectionTypeChange.bind(this);\n    this._addToCart = this._addToCart.bind(this);\n    this._resetFilters = this._resetFilters.bind(this);\n\n    this._cardsModel.setFilterChangeHandler(this._onFilterChange);\n\n    this._cardControllers = [];\n  }\n\n  render() {\n    const container = this._container;\n    const cards = this._cardsModel.getCards();\n\n    this._renderSortComponents();\n    render(container, this._cardsListComponent, RenderPosition.BEFOREEND);\n    this._renderCards(cards);\n    this._renderPagination(cards);\n    this._setCartItemCount();\n    this._renderFilterContoller();\n  }\n\n  _renderCards(cards) {\n    const catalogListElement = document.querySelector(`.catalog__list`);\n    const renderCardControllers = () => {\n      const cardControllers = [];\n      cards.slice(0, CARDS_PER_PAGE).forEach((card) => {\n        const cardController = new CardController(catalogListElement, this._addToCart);\n        cardController.render(card);\n        cardControllers.push(cardController);\n      });\n      return cardControllers;\n    };\n\n    this._cardControllers = renderCardControllers();\n  }\n\n  _renderFilterContoller() {\n    const catalogSectionElement = document.querySelector(`.catalog`);\n    this._filterController = new FilterController(catalogSectionElement, this._cardsModel);\n    this._filterController.render();\n  }\n\n  _renderPagination(cards) {\n    const pagesNumber = Math.ceil(cards.length / CARDS_PER_PAGE);\n    const activePage = this._activePage;\n    if (pagesNumber !== 1) {\n      this._paginationComponent = new PaginationComponent(pagesNumber, activePage);\n      render(this._container, this._paginationComponent, RenderPosition.BEFOREEND);\n    }\n  }\n\n  _renderSortComponents() {\n    this._sortComponent = new SortComponent(\n        this._currentSortFeatureType,\n        this._currentSortDirectionType\n    );\n    render(this._container, this._sortComponent, RenderPosition.AFTERBEGIN);\n    this._sortComponent\n        .setSortFeatureTypeChangeHandler(this._onSortFeatureTypeChange);\n    this._sortComponent\n        .setSortDirectionTypeChangeHandler(this._onSortDirectionTypeChange);\n  }\n\n  _removeCards() {\n    const catalogListElement = this._cardsListComponent.getElement();\n    catalogListElement.innerHTML = ``;\n    this._cardControllers = [];\n  }\n\n  _removePagination() {\n    remove(this._paginationComponent);\n  }\n\n  _update() {\n    this._removeCards();\n    this._removePagination();\n    this._renderCards(this._cardsModel.getCards());\n    remove(this._sortComponent);\n\n    if (this._cardsModel.getCards().length > 0) {\n\n      this._renderPagination(this._cardsModel.getCards());\n\n      this._renderSortComponents();\n      this._onSortFeatureTypeChange(this._currentSortFeatureType);\n      this._onSortDirectionTypeChange(this._currentSortDirectionType);\n\n    } else {\n      const catalogListElement = document.querySelector(`.catalog__list`);\n      render(catalogListElement, this._noCardsComponent, RenderPosition.AFTERBEGIN);\n      this._noCardsComponent.setToResetFiltersButtonClickHandler(this._resetFilters);\n    }\n  }\n\n  _resetFilters() {\n    const checkboxFilters = [];\n    const minPrice = null;\n    const maxPrice = null;\n    this._cardsModel.setFilter(checkboxFilters, minPrice, maxPrice);\n    this._onFilterChange();\n    this._filterController.remove();\n    this._filterController.render();\n  }\n\n  _onFilterChange() {\n    this._update();\n  }\n\n  _onSortFeatureTypeChange(sortType) {\n    this._currentSortFeatureType = sortType;\n    let sortedCards = [];\n    const cards = this._cardsModel.getCards();\n\n    if (sortType === SortType.DEFAULT) {\n      return;\n    }\n\n    if (this._currentSortDirectionType === SortType.DEFAULT) {\n      this._currentSortDirectionType = SortType.ASCENDING;\n    }\n\n    switch (sortType) {\n\n      case SortType.PRICE:\n        sortedCards = cards.slice().sort((a, b) => {\n          return this._currentSortDirectionType === SortType.ASCENDING ?\n            a.price - b.price : b.price - a.price;\n        });\n        break;\n\n      case SortType.POPULARITY:\n        sortedCards = cards.slice().sort((a, b) => {\n          return this._currentSortDirectionType === SortType.ASCENDING ?\n            a.popularity - b.popularity : b.popularity - a.popularity;\n        });\n        break;\n\n      case SortType.DEFAULT:\n        sortedCards = cards;\n        break;\n    }\n\n    this._removeCards();\n    this._renderCards(sortedCards);\n    remove(this._sortComponent);\n    this._renderSortComponents();\n  }\n\n  _onSortDirectionTypeChange(sortType) {\n    this._currentSortDirectionType = sortType;\n    let sortedCards = [];\n    const cards = this._cardsModel.getCards();\n\n    if (sortType === SortType.DEFAULT) {\n      return;\n    }\n\n    if (this._currentSortFeatureType === SortType.DEFAULT) {\n      this._currentSortFeatureType = SortType.PRICE;\n    }\n\n    switch (sortType) {\n\n      case SortType.ASCENDING:\n        sortedCards = cards.slice().sort((a, b) => {\n          return this._currentSortFeatureType === SortType.PRICE ?\n            a.price - b.price : a.popularity - b.popularity;\n        });\n        break;\n\n      case SortType.DESCENDING:\n        sortedCards = cards.slice().sort((a, b) => {\n          return this._currentSortFeatureType === SortType.PRICE ?\n            b.price - a.price : b.popularity - a.popularity;\n        });\n        break;\n\n      case SortType.DEFAULT:\n        sortedCards = cards;\n        break;\n    }\n\n    this._removeCards();\n    this._renderCards(sortedCards);\n    remove(this._sortComponent);\n    this._renderSortComponents();\n  }\n\n  _setCartItemCount() {\n    if (!localStorage.getItem(`session`)) {\n      return;\n    }\n    const cartItemsElement = document.querySelector(`.page-header__cart-items sup`);\n    let cartItemsCounter = JSON.parse(localStorage.getItem(`session`)).length;\n\n    if (cartItemsCounter > 0) {\n      cartItemsElement.parentElement.classList.remove(`visually-hidden`);\n    } else {\n      cartItemsElement.parentElement.classList.add(`visually-hidden`);\n    }\n\n    cartItemsElement.innerHTML = cartItemsCounter;\n  }\n\n  _addToCart(card) {\n    saveDataToLocalStorage(card);\n    this._setCartItemCount();\n  }\n}\n","import CartItemComponent from '../components/cart-item.js';\nimport DeleteFromCartPopup from '../components/delete-from-cart-popup.js';\nimport {render, RenderPosition} from '../utils/render.js';\nimport {openPopup, closePopup} from '../utils/popup.js';\n\nexport default class CartItemController {\n  constructor(container, removeFromCart, changeItemQuantity) {\n    this._container = container;\n    this._removeFromCart = removeFromCart;\n    this._changeItemQuantity = changeItemQuantity;\n\n    this._cartItemComponent = null;\n    this._card = null;\n  }\n\n  render(card) {\n    this._card = card;\n    this._cartItemComponent = new CartItemComponent(this._card);\n    render(this._container, this._cartItemComponent, RenderPosition.BEFOREEND);\n    this.setCartItemListeners();\n  }\n\n  setCartItemListeners() {\n    this._cartItemComponent.setQuantityChangeHandler(this._changeItemQuantity);\n\n    this._cartItemComponent.setDeleteButtonClickHandler(() => {\n      const bodyElement = document.querySelector(`body`);\n\n      this._deleteFromCartPopup = new DeleteFromCartPopup(this._card);\n      const popup = this._deleteFromCartPopup;\n      render(bodyElement, popup, RenderPosition.BEFOREEND);\n      const cancelButtonElement = popup.getElement().querySelector(`.button--shopping`);\n      this.setPopupListeners(this._card);\n      openPopup(popup);\n      cancelButtonElement.addEventListener(`click`, () => {\n        closePopup(popup);\n      });\n    });\n  }\n\n  setPopupListeners(card) {\n    this._deleteFromCartPopup.setDeleteButtonClickHandler(() => {\n      this._removeFromCart(card);\n      closePopup(this._deleteFromCartPopup);\n    });\n  }\n}\n","import CartComponent from '../components/cart.js';\nimport PromoForm from '../components/promo.js';\nimport CartSumComponent from '../components/cart-sum.js';\nimport CartItemController from './cart-item.js';\nimport {render, remove, RenderPosition} from '../utils/render.js';\nimport {deleteDataFromLocalStorage} from '../utils/local-storage.js';\nimport {PromoCodes} from '../const.js';\n\nexport default class CartController {\n  constructor(container) {\n    this._container = container;\n    this._cartComponent = new CartComponent();\n    this._cartItemControllers = [];\n    this._cards = JSON.parse(localStorage.getItem(`session`));\n    this._removeFromCart = this._removeFromCart.bind(this);\n    this._changeItemQuantity = this._changeItemQuantity.bind(this);\n    this._promoForm = null;\n    this._cartSumComponent = null;\n    this._cartSum = 0;\n    this._checkPromoCode = this._checkPromoCode.bind(this);\n  }\n\n  render() {\n    const container = this._container;\n    render(container, this._cartComponent, RenderPosition.BEFOREEND);\n    this._renderCartItems(this._cards);\n    this._setCartItemCount();\n    this._renderPromoForm();\n    this._getCartSum();\n    this._renderCartSum();\n  }\n\n  _renderCartItems(cards) {\n    if (!localStorage.getItem(`session`)) {\n      return;\n    }\n\n    const cartListElement = document.querySelector(`.cart ul`);\n    const renderCartItemControllers = () => {\n      const cartItemControllers = [];\n      cards.forEach((card) => {\n        const cartItemController = new CartItemController(\n            cartListElement,\n            this._removeFromCart,\n            this._changeItemQuantity\n        );\n        cartItemController.render(card);\n        cartItemControllers.push(cartItemController);\n      });\n      return cartItemControllers;\n    };\n\n    this._cartItemControllers = renderCartItemControllers();\n  }\n\n  _renderPromoForm() {\n    const containerElement = this._cartComponent.getElement().querySelector(`.promo`);\n    this._promoForm = new PromoForm();\n    render(containerElement, this._promoForm, RenderPosition.AFTERBEGIN);\n    this._promoForm.setSubmitHandler(this._checkPromoCode);\n  }\n\n  _getCartSum() {\n    const itemSumBlocksElements = Array.from(\n        this._cartComponent.getElement().querySelectorAll(`.cart__price--full`)\n    );\n    const itemSums = itemSumBlocksElements.map((itemSumBlock) =>\n      Number(itemSumBlock.dataset.sum)\n    );\n    this._cartSum = itemSums.reduce((sum, value) => {\n      return sum + value;\n    }, 0);\n  }\n\n  _renderCartSum() {\n    const containerElement = this._cartComponent.getElement().querySelector(`.promo`);\n    this._cartSumComponent = new CartSumComponent(this._cartSum);\n    render(containerElement, this._cartSumComponent, RenderPosition.BEFOREEND);\n  }\n\n  _setCartItemCount() {\n    if (!localStorage.getItem(`session`)) {\n      return;\n    }\n\n    const cartItemsElement = document.querySelector(`.page-header__cart-items sup`);\n    let cartItemsCounter = JSON.parse(localStorage.getItem(`session`)).length;\n\n    if (cartItemsCounter > 0) {\n      cartItemsElement.parentElement.classList.remove(`visually-hidden`);\n    } else {\n      cartItemsElement.parentElement.classList.add(`visually-hidden`);\n    }\n\n    cartItemsElement.innerHTML = cartItemsCounter;\n  }\n\n  _removeCartItems() {\n    const cartListElement = document.querySelector(`.cart ul`);\n    cartListElement.innerHTML = ``;\n    this._cartItemControllers = [];\n  }\n\n  _checkPromoCode(code) {\n    switch (code) {\n\n      case PromoCodes.GITARAHIT:\n        this._cartSum = this._cartSum * 0.9;\n        break;\n\n      case PromoCodes.SUPERGITARA:\n        this._cartSum = this._cartSum - 700;\n        break;\n\n      case PromoCodes.GITARA2020:\n        const discount = ((this._cartSum * 0.3) > 3500) ? 3500 : this._cartSum * 0.3;\n        this._cartSum = this._cartSum - discount;\n        break;\n\n      default:\n        return;\n    }\n\n    remove(this._cartSumComponent);\n    this._renderCartSum();\n  }\n\n  _update() {\n    this._removeCartItems();\n    const cards = JSON.parse(localStorage.getItem(`session`));\n    this._renderCartItems(cards);\n  }\n\n  _removeFromCart(card) {\n    deleteDataFromLocalStorage(card);\n    this._setCartItemCount();\n    this._update();\n    remove(this._cartSumComponent);\n    this._getCartSum();\n    this._renderCartSum();\n  }\n\n  _changeItemQuantity() {\n    if (this._cartSumComponent) {\n      remove(this._cartSumComponent);\n      this._getCartSum();\n      this._renderCartSum();\n    }\n  }\n}\n","import FilterComponent from '../components/filter.js';\nimport CheckboxFieldsets from '../components/checkbox-fieldsets.js';\nimport {render, replace, remove, RenderPosition} from '../utils/render.js';\nimport {FILTERS_BY_TYPE, FILTERS_BY_STRINGS} from '../const.js';\nimport {getSameStringsType} from '../utils/filter.js';\n\nexport default class FilterController {\n  constructor(container, cardsModel) {\n    this._container = container;\n    this._cardsModel = cardsModel;\n\n    this._filterComponent = null;\n    this._checkboxFieldsetsComponent = null;\n    this._onPriceChange = this._onPriceChange.bind(this);\n    this._onCheckboxChange = this._onCheckboxChange.bind(this);\n    this._onFilterChange = this._onFilterChange.bind(this);\n\n    this._checkedCheckboxes = [];\n    this._minPrice = null;\n    this._maxPrice = null;\n  }\n\n  render() {\n    const container = this._container;\n    const cards = this._cardsModel.getCards();\n\n    this._filterComponent = new FilterComponent(cards);\n    this._filterComponent.setFilterChangeHandler(this._onPriceChange, this._onFilterChange);\n\n    render(container, this._filterComponent, RenderPosition.AFTERBEGIN);\n    this._renderCheckboxFieldsets();\n  }\n\n  remove() {\n    this._checkedCheckboxes = [];\n    this._minPrice = null;\n    this._maxPrice = null;\n\n    remove(this._filterComponent);\n    remove(this._checkboxFieldsetsComponent);\n\n    this._filterComponent = null;\n    this._checkboxFieldsetsComponent = null;\n\n    FILTERS_BY_TYPE.checkboxes.forEach((checkbox) => {\n      checkbox.isChecked = false;\n    });\n\n    FILTERS_BY_STRINGS.checkboxes.forEach((checkbox) => {\n      checkbox.isChecked = false;\n    });\n  }\n\n  _renderCheckboxFieldsets() {\n    const container = this._filterComponent.getElement();\n    const oldComponent = this._checkboxFieldsetsComponent;\n\n    const guitarTypeCheckboxes = FILTERS_BY_TYPE.checkboxes.map((checkbox) => checkbox.item);\n    const guitarTypeCheckedCheckboxes = this._checkedCheckboxes.filter(\n        (filter) => guitarTypeCheckboxes.includes(filter)\n    );\n\n    FILTERS_BY_STRINGS.checkboxes.forEach((checkbox) => {\n      const arrayLength = getSameStringsType(\n          this._cardsModel.getCardsByGuitarTypeFilter(),\n          checkbox.item\n      ).length;\n      checkbox.isDisabled = (arrayLength === 0 && guitarTypeCheckedCheckboxes.length);\n    });\n\n    this._checkboxFieldsetsComponent = new CheckboxFieldsets(FILTERS_BY_TYPE, FILTERS_BY_STRINGS);\n    this._checkboxFieldsetsComponent.setFilterChangeHandler(this._onCheckboxChange, this._onFilterChange);\n\n    if (oldComponent) {\n      replace(this._checkboxFieldsetsComponent, oldComponent);\n    } else {\n      render(container, this._checkboxFieldsetsComponent, RenderPosition.BEFOREEND);\n    }\n  }\n\n  _onPriceChange(minPrice, maxPrice) {\n    this._minPrice = minPrice;\n    this._maxPrice = maxPrice;\n  }\n\n  _onCheckboxChange(checkboxNames) {\n    this._checkedCheckboxes = checkboxNames;\n  }\n\n  _onFilterChange() {\n    this._cardsModel.setFilter(\n        this._checkedCheckboxes,\n        this._minPrice,\n        this._maxPrice\n    );\n    this._renderCheckboxFieldsets();\n  }\n}\n","export const GUITARS = [\n  {\n    'item': `1`,\n    'article': `SO757575`,\n    'title': `Честер Bass`,\n    'type': `электрогитара`,\n    'popularity': `15`,\n    'strings': `7`,\n    'price': `17500`\n  },\n  {\n    'item': `2`,\n    'article': `TK129049`,\n    'title': `СURT Z300`,\n    'type': `электрогитара`,\n    'popularity': `9`,\n    'strings': `7`,\n    'price': `29500`\n  },\n  {\n    'item': `3`,\n    'article': `RO111111`,\n    'title': `Roman LX`,\n    'type': `укулеле`,\n    'popularity': `21`,\n    'strings': `4`,\n    'price': `6800`\n  },\n  {\n    'item': `4`,\n    'article': `TK436457`,\n    'title': `СURT T300`,\n    'type': `электрогитара`,\n    'popularity': `15`,\n    'strings': `6`,\n    'price': `30000`\n  },\n  {\n    'item': `5`,\n    'article': `DI192138`,\n    'title': `Dania Super`,\n    'type': `акустическая гитара`,\n    'popularity': `5`,\n    'strings': `7`,\n    'price': `3500`\n  },\n  {\n    'item': `6`,\n    'article': `SO934345`,\n    'title': `Честер WX`,\n    'type': `электрогитара`,\n    'popularity': `17`,\n    'strings': `6`,\n    'price': `15300`\n  },\n  {\n    'item': `7`,\n    'article': `DI082347`,\n    'title': `Dania VX`,\n    'type': `укулеле`,\n    'popularity': `5`,\n    'strings': `4`,\n    'price': `2200`\n  },\n  {\n    'item': `8`,\n    'article': `SO135646`,\n    'title': `Честер Plus`,\n    'type': `электрогитара`,\n    'popularity': `27`,\n    'strings': `4`,\n    'price': `30000`\n  },\n  {\n    'item': `9`,\n    'article': `VO154751`,\n    'title': `Виолана 300`,\n    'type': `акустическая гитара`,\n    'popularity': `3`,\n    'strings': `7`,\n    'price': `1700`\n  },\n  {\n    'item': `10`,\n    'article': `TK244556`,\n    'title': `СURT Clasic`,\n    'type': `электрогитара`,\n    'popularity': `20`,\n    'strings': `4`,\n    'price': `23000`\n  },\n  {\n    'item': `11`,\n    'article': `TK134663`,\n    'title': `СURT Z250`,\n    'type': `электрогитара`,\n    'popularity': `19`,\n    'strings': `4`,\n    'price': `18700`\n  },\n  {\n    'item': `12`,\n    'article': `SO123212`,\n    'title': `Честер 7X`,\n    'type': `электрогитара`,\n    'popularity': `30`,\n    'strings': `7`,\n    'price': `35000`\n  },\n  {\n    'item': `13`,\n    'article': `SO123234`,\n    'title': `Честер 6V`,\n    'type': `электрогитара`,\n    'popularity': `28`,\n    'strings': `6`,\n    'price': `14900`\n  },\n  {\n    'item': `14`,\n    'article': `VO519510`,\n    'title': `Виолана Mix`,\n    'type': `акустическая гитара`,\n    'popularity': `7`,\n    'strings': `6`,\n    'price': `7600`\n  },\n  {\n    'item': `15`,\n    'article': `VO457369`,\n    'title': `Виолана 250x`,\n    'type': `акустическая гитара`,\n    'popularity': `19`,\n    'strings': `6`,\n    'price': `6500`\n  },\n  {\n    'item': `16`,\n    'article': `FB625903`,\n    'title': `Фабио Лайт`,\n    'type': `акустическая гитара`,\n    'popularity': `26`,\n    'strings': `7`,\n    'price': `12000`\n  },\n  {\n    'item': `17`,\n    'article': `FB576948`,\n    'title': `Фабио L100`,\n    'type': `акустическая гитара`,\n    'popularity': `31`,\n    'strings': `7`,\n    'price': `9900`\n  },\n  {\n    'item': `18`,\n    'article': `LU012032`,\n    'title': `Liana Z200`,\n    'type': `акустическая гитара`,\n    'popularity': `28`,\n    'strings': `12`,\n    'price': `8900`\n  },\n  {\n    'item': `19`,\n    'article': `LU546853`,\n    'title': `Liana Z100`,\n    'type': `акустическая гитара`,\n    'popularity': `34`,\n    'strings': `12`,\n    'price': `10500`\n  },\n  {\n    'item': `20`,\n    'article': `LU458283`,\n    'title': `Liana Z300`,\n    'type': `акустическая гитара`,\n    'popularity': `9`,\n    'strings': `6`,\n    'price': `13300`\n  },\n  {\n    'item': `21`,\n    'article': `RO324341`,\n    'title': `Roman RX`,\n    'type': `укулеле`,\n    'popularity': `37`,\n    'strings': `4`,\n    'price': `4800`\n  },\n  {\n    'item': `22`,\n    'article': `RO214235`,\n    'title': `Roman TX`,\n    'type': `укулеле`,\n    'popularity': `5`,\n    'strings': `4`,\n    'price': `1900`\n  },\n  {\n    'item': `23`,\n    'article': `DI132414`,\n    'title': `Dania U100`,\n    'type': `укулеле`,\n    'popularity': `23`,\n    'strings': `4`,\n    'price': `2500`\n  },\n  {\n    'item': `24`,\n    'article': `DI934754`,\n    'title': `Dania WR`,\n    'type': `укулеле`,\n    'popularity': `3`,\n    'strings': `4`,\n    'price': `3800`\n  },\n  {\n    'item': `25`,\n    'article': `DI034292`,\n    'title': `Dania LE`,\n    'type': `укулеле`,\n    'popularity': `10`,\n    'strings': `4`,\n    'price': `4100`\n  },\n  {\n    'item': `26`,\n    'article': `MI193214`,\n    'title': `Mirana V10`,\n    'type': `укулеле`,\n    'popularity': `14`,\n    'strings': `4`,\n    'price': `2700`\n  },\n  {\n    'item': `27`,\n    'article': `VO043244`,\n    'title': `Виолана Mini`,\n    'type': `укулеле`,\n    'popularity': `29`,\n    'strings': `4`,\n    'price': `6700`\n  }\n];\n","import {GUITARS} from './guitars.js';\nimport CardsModel from './models/cards.js';\n\nimport CardsController from './controllers/cards.js';\nimport CartController from './controllers/cart.js';\n\nimport CatalogContentComponent from './components/catalog-content.js';\n\nimport {render, RenderPosition} from './utils/render.js';\n\nconst cardsModel = new CardsModel();\ncardsModel.setCards(GUITARS);\n\nconst catalogSectionElement = document.querySelector(`.catalog`);\nconst cartSectionElement = document.querySelector(`.page-main--cart`);\n\nif (catalogSectionElement) {\n  render(catalogSectionElement, new CatalogContentComponent(), RenderPosition.BEFOREEND);\n  const catalogContentSection = document.querySelector(`.catalog__content`);\n  const cardsController = new CardsController(catalogContentSection, cardsModel);\n  cardsController.render();\n}\n\nif (cartSectionElement) {\n  const cartController = new CartController(cartSectionElement);\n  cartController.render();\n}\n","import {getCardsByFilter, getSameGuitarType} from '../utils/filter.js';\n\nexport default class Cards {\n  constructor() {\n    this._cards = [];\n    this._filterChangeHandlers = [];\n    this._checkboxNames = [];\n    this._minPrice = null;\n    this._maxPrice = null;\n  }\n\n  getCards() {\n    return getCardsByFilter(\n        this._cards,\n        this._checkboxNames,\n        this._minPrice,\n        this._maxPrice\n    );\n  }\n\n  getCardsByGuitarTypeFilter() {\n    return getSameGuitarType(\n        this._cards,\n        this._checkboxNames,\n        this._minPrice,\n        this._maxPrice\n    );\n  }\n\n  setCards(cards) {\n    this._cards = cards;\n  }\n\n  setFilter(checkboxNames, minPrice, maxPrice) {\n    this._checkboxNames = checkboxNames;\n    this._minPrice = minPrice;\n    this._maxPrice = maxPrice;\n    this._callHandlers(this._filterChangeHandlers);\n  }\n\n  setFilterChangeHandler(handler) {\n    this._filterChangeHandlers.push(handler);\n  }\n\n  _callHandlers(handlers) {\n    handlers.forEach((handler) => handler());\n  }\n}\n","const DEBOUNCE_INTERVAL = 500;\n\nexport const debounce = (cb) => {\n  let lastTimeout = null;\n\n  return function (...args) {\n    if (lastTimeout) {\n      window.clearTimeout(lastTimeout);\n    }\n    lastTimeout = window.setTimeout(function () {\n      cb(...args);\n    }, DEBOUNCE_INTERVAL);\n  };\n};\n","import {FILTERS_BY_TYPE, FILTERS_BY_STRINGS} from '../const.js';\n\nconst getSamePrice = (card, minPrice, maxPrice) => {\n  if (minPrice && maxPrice) {\n    return Number(card.price) <= maxPrice && Number(card.price) >= minPrice;\n  } else if (minPrice) {\n    return Number(card.price) >= minPrice;\n  } else if (maxPrice) {\n    return Number(card.price) <= maxPrice;\n  } else {\n    return card;\n  }\n};\n\nexport const getSameGuitarType = (cards, checkboxNames, minPrice, maxPrice) => {\n  return cards.filter((card) => {\n    return checkboxNames.includes(card.type) &&\n    getSamePrice(card, minPrice, maxPrice);\n  });\n};\n\nexport const getSameStringsType = (cards, checkboxNames, minPrice, maxPrice) => {\n  return cards.filter((card) => {\n    return checkboxNames.includes(card.strings) &&\n    getSamePrice(card, minPrice, maxPrice);\n  });\n};\n\nconst getSameFilters = (cards, checkboxNames, minPrice, maxPrice) => {\n  return cards.filter((card) => {\n    return checkboxNames.includes(card.type) &&\n    checkboxNames.includes(card.strings) &&\n    getSamePrice(card, minPrice, maxPrice);\n  });\n};\n\nconst guitarTypeCheckboxes = FILTERS_BY_TYPE.checkboxes.map((checkbox) => checkbox.item);\nconst stringsNumberCheckboxes = FILTERS_BY_STRINGS.checkboxes.map((checkbox) => checkbox.item);\n\nexport const getCardsByFilter = (cards, checkboxNames, minPrice, maxPrice) => {\n  const guitarTypeCheckedCheckboxes = checkboxNames.filter(\n      (filter) => guitarTypeCheckboxes.includes(filter)\n  );\n  const stringsNumberCheckedCheckboxes = checkboxNames.filter(\n      (filter) => stringsNumberCheckboxes.includes(filter)\n  );\n\n  if (checkboxNames.length) {\n\n    if (guitarTypeCheckedCheckboxes.length &&\n      !stringsNumberCheckedCheckboxes.length) {\n      return getSameGuitarType(\n          cards,\n          guitarTypeCheckedCheckboxes,\n          minPrice,\n          maxPrice\n      );\n    } else if (!guitarTypeCheckedCheckboxes.length &&\n      stringsNumberCheckedCheckboxes.length) {\n      return getSameStringsType(\n          cards,\n          stringsNumberCheckedCheckboxes,\n          minPrice,\n          maxPrice\n      );\n    } else {\n      return getSameFilters(cards, checkboxNames, minPrice, maxPrice);\n    }\n  } else {\n    return cards.filter((card) => getSamePrice(card, minPrice, maxPrice));\n  }\n};\n","import {guitarTypeToImage} from '../const.js';\n\nexport const formatPrice = (price) => {\n  return price.toString().replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, `$1 `);\n};\n\nexport const createArray = (maxValue) => {\n  const array = [];\n  for (let i = 1; i <= maxValue; i++) {\n    array.push(i);\n  }\n  return array;\n};\n\nexport const getImage = (item, type) => {\n  return (item < 8) ? `img/guitars/guitar-${item}.png` : guitarTypeToImage[type];\n};\n","export const saveDataToLocalStorage = (data) => {\n  let array = JSON.parse(localStorage.getItem(`session`)) || [];\n  const item = data.item;\n  const index = array.findIndex((element) => element.item === item);\n  if (index === -1) {\n    array.push(data);\n  }\n  localStorage.setItem(`session`, JSON.stringify(array));\n};\n\nexport const deleteDataFromLocalStorage = (data) => {\n  let array = JSON.parse(localStorage.getItem(`session`));\n  const item = data.item;\n  const index = array.findIndex((element) => element.item === item);\n  array = [].concat(array.slice(0, index), array.slice(index + 1));\n  localStorage.setItem(`session`, JSON.stringify(array));\n};\n","import {remove} from './render.js';\n\nexport const openPopup = (popup) => {\n  const popupElement = popup.getElement();\n  const closePopupButtonElement = popupElement.querySelector(`.popup__close-button`);\n  const overlayElement = document.querySelector(`.overlay`);\n  const bodyElement = document.querySelector(`body`);\n\n  const onOpenButtonClick = () => {\n    overlayElement.classList.remove(`overlay--hidden`);\n    bodyElement.classList.add(`no-scroll`);\n    window.addEventListener(`keydown`, onEscPress);\n  };\n\n  const onCloseButtonClick = () => {\n    overlayElement.classList.add(`overlay--hidden`);\n    bodyElement.classList.remove(`no-scroll`);\n    remove(popup);\n    window.removeEventListener(`keydown`, onEscPress);\n  };\n\n  const onEscPress = (evt) => {\n    if (evt.keyCode === 27 && !popupElement.classList.contains(`popup--closed`)) {\n      onCloseButtonClick(evt);\n    }\n  };\n\n  onOpenButtonClick();\n  closePopupButtonElement.addEventListener(`click`, () => {\n    closePopup(popup);\n  });\n  overlayElement.addEventListener(`click`, () => {\n    closePopup(popup);\n  });\n};\n\nexport const closePopup = (popup) => {\n  const popupElement = popup.getElement();\n  const overlayElement = document.querySelector(`.overlay`);\n  const bodyElement = document.querySelector(`body`);\n\n  const onCloseButtonClick = () => {\n    overlayElement.classList.add(`overlay--hidden`);\n    bodyElement.classList.remove(`no-scroll`);\n    remove(popup);\n    window.removeEventListener(`keydown`, onEscPress);\n  };\n\n  const onEscPress = (evt) => {\n    if (evt.keyCode === 27 && !popupElement.classList.contains(`popup--closed`)) {\n      onCloseButtonClick(evt);\n    }\n  };\n\n  overlayElement.classList.add(`overlay--hidden`);\n  bodyElement.classList.remove(`no-scroll`);\n  remove(popup);\n  window.removeEventListener(`keydown`, onEscPress);\n};\n","export const RenderPosition = {\n  AFTERBEGIN: `afterbegin`,\n  BEFOREEND: `beforeend`\n};\n\nexport const createElement = (template) => {\n  const newElement = document.createElement(`div`);\n  newElement.innerHTML = template;\n\n  return newElement.firstChild;\n};\n\nexport const render = (container, component, place) => {\n  switch (place) {\n    case RenderPosition.AFTERBEGIN:\n      container.prepend(component.getElement());\n      break;\n    case RenderPosition.BEFOREEND:\n      container.append(component.getElement());\n      break;\n  }\n};\n\nexport const replace = (newComponent, oldComponent) => {\n  const parentElement = oldComponent.getElement().parentElement;\n  const newElement = newComponent.getElement();\n  const oldElement = oldComponent.getElement();\n\n  const isExistElements = !!(parentElement && newElement && oldElement);\n\n  if (isExistElements && parentElement.contains(oldElement)) {\n    parentElement.replaceChild(newElement, oldElement);\n  }\n};\n\nexport const remove = (component) => {\n  component.getElement().remove();\n  component.removeElement();\n};\n"],"sourceRoot":""}